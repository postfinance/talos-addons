apiVersion: v1
kind: ConfigMap
metadata:
  name: syslog-ng-config
data:
  syslog-ng.conf: |
    @version: 4.2
    @include "scl.conf"

    # Source definition for JSON logs on port 514
    source s_json {
        network(
            port(514)
            transport("udp")
            flags(no-parse)  # Don't try to parse as syslog
        );
    };

    # Parser for JSON format
    parser p_json {
        json-parser();
    };

    # Define the destination as stdout
    destination d_stdout {
        pipe("/dev/stdout");
    };

    # Define the log path
    log {
        source(s_json);
        parser(p_json);
        destination(d_stdout);
    };
